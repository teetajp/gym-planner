CREATE EXTENSION citext;

CREATE TABLE IF NOT EXISTS persons (
    person_id serial PRIMARY KEY,
    username TEXT NOT NULL,
    hash TEXT NOT NULL,
    email citext NOT NULL,
    is_coach BOOLEAN NOT NULL DEFAULT false
);

CREATE UNIQUE INDEX ON address ((lower(email)));